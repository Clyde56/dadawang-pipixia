<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤§å¤§ç‹ & çš®çš®è™¾ â¤ï¸</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%); color: #333; }
        
        .screen { display: none; min-height: 100%; }
        .screen.active { display: block; }
        
        /* æ¬¢è¿é¡µ */
        #welcome-screen { display: none; align-items: center; justify-content: center; padding: 20px; }
        #welcome-screen.active { display: flex; }
        .welcome-content { width: 100%; max-width: 360px; text-align: center; }
        .heart { width: 80px; height: 80px; background: linear-gradient(135deg, #FF6B8A, #FF8E8E); margin: 0 auto 20px; clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); animation: heartbeat 1.5s ease-in-out infinite; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .app-title { font-size: 24px; margin-bottom: 8px; background: linear-gradient(135deg, #FF6B8A, #FF8E8E); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .app-slogan { color: #666; font-size: 14px; margin-bottom: 30px; }
        .welcome-form { background: rgba(255,255,255,0.95); padding: 24px; border-radius: 20px; box-shadow: 0 4px 20px rgba(255,107,138,0.2); }
        .input-group { margin-bottom: 16px; text-align: left; }
        .input-group label { display: block; font-size: 13px; color: #666; margin-bottom: 6px; }
        .input-group input { width: 100%; padding: 12px; border: 1px solid #eee; border-radius: 10px; font-size: 15px; }
        .input-group input:focus { outline: none; border-color: #FF6B8A; }
        .btn-primary { width: 100%; padding: 14px; border: none; border-radius: 12px; background: linear-gradient(135deg, #FF6B8A, #FF4757); color: white; font-size: 16px; cursor: pointer; }
        .btn-primary:hover { opacity: 0.9; }
        
        /* é”å± */
        #lock-screen { display: none; align-items: center; justify-content: center; cursor: pointer; }
        #lock-screen.active { display: flex; }
        .lock-icon { font-size: 60px; margin-bottom: 16px; }
        
        /* ä¸»ç•Œé¢ */
        #main-screen.active { display: block; }
        .header { display: flex; align-items: center; justify-content: space-between; padding: 16px; background: rgba(255,255,255,0.9); position: sticky; top: 0; z-index: 100; }
        .header h1 { font-size: 16px; }
        .icon-btn { width: 36px; height: 36px; border-radius: 50%; border: none; background: rgba(0,0,0,0.05); font-size: 18px; cursor: pointer; }
        
        .main-content { padding: 16px; }
        
        /* è®¡æ—¶å™¨ */
        .timer-card { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 20px; text-align: center; margin-bottom: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .timer-label { font-size: 13px; color: #666; margin-bottom: 12px; }
        .timer-display { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 8px; margin-bottom: 8px; }
        .timer-unit { text-align: center; }
        .timer-value { font-size: 32px; font-weight: 600; color: #FF6B8A; font-family: Georgia, serif; }
        .timer-unit-small .timer-value { font-size: 18px; }
        .timer-text { font-size: 11px; color: #888; }
        .timer-separator { font-size: 24px; color: #FF6B8A; }
        .timer-subtitle { font-size: 13px; color: #666; }
        .highlight { color: #FF6B8A; font-weight: 600; }
        
        /* å¿«æ·æ“ä½œ */
        .quick-actions { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 16px; }
        .action-btn { background: rgba(255,255,255,0.95); border: none; border-radius: 14px; padding: 14px 8px; display: flex; flex-direction: column; align-items: center; gap: 6px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .action-btn i { font-size: 22px; color: #FF6B8A; }
        .action-btn span { font-size: 12px; }
        
        /* å¡ç‰‡ */
        .section-card { background: rgba(255,255,255,0.95); border-radius: 16px; padding: 16px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .card-header h2 { font-size: 15px; display: flex; align-items: center; gap: 6px; }
        .card-header h2 i { color: #FF6B8A; }
        .view-all-btn { background: none; border: none; color: #FF6B8A; font-size: 13px; cursor: pointer; }
        
        /* çºªå¿µæ—¥ */
        .anniversary-item { display: flex; align-items: center; gap: 12px; padding: 10px; background: rgba(255,107,138,0.08); border-radius: 10px; margin-bottom: 8px; }
        .anniversary-icon { width: 36px; height: 36px; border-radius: 10px; background: linear-gradient(135deg, #FFB6C1, #FF6B8A); display: flex; align-items: center; justify-content: center; font-size: 18px; }
        .anniversary-info { flex: 1; }
        .anniversary-name { font-size: 14px; font-weight: 500; }
        .anniversary-date { font-size: 12px; color: #888; }
        .anniversary-countdown { text-align: center; min-width: 40px; }
        .countdown-days { font-size: 18px; font-weight: 600; color: #FF6B8A; }
        .countdown-label { font-size: 10px; color: #888; }
        
        /* åŠ¨æ€ */
        .moment-item { padding: 10px; background: rgba(0,0,0,0.03); border-radius: 10px; margin-bottom: 8px; }
        .moment-header { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .moment-author { font-size: 13px; font-weight: 500; }
        .moment-time { font-size: 12px; color: #888; }
        .moment-content { font-size: 14px; line-height: 1.5; }
        
        /* ä¾§è¾¹æ  */
        .drawer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; pointer-events: none; }
        .drawer.active { pointer-events: auto; }
        .drawer-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); opacity: 0; transition: opacity 0.3s; }
        .drawer.active .drawer-overlay { opacity: 1; }
        .drawer-content { position: absolute; top: 0; left: 0; width: 260px; height: 100%; background: white; transform: translateX(-100%); transition: transform 0.3s; display: flex; flex-direction: column; }
        .drawer.active .drawer-content { transform: translateX(0); }
        .drawer-header { padding: 20px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid #eee; }
        .user-avatar { width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #FFB6C1, #FF6B8A); display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .user-info h3 { font-size: 16px; margin-bottom: 2px; }
        .user-info p { font-size: 13px; color: #888; }
        .drawer-nav { padding: 12px; flex: 1; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 14px; color: #333; text-decoration: none; border-radius: 10px; margin-bottom: 4px; }
        .nav-item:hover, .nav-item.active { background: rgba(255,107,138,0.1); }
        .nav-item.active { color: #FF6B8A; }
        .nav-item i { font-size: 20px; }
        .nav-item span { font-size: 15px; }
        
        /* é¡µé¢å®¹å™¨ */
        #pages-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; pointer-events: none; }
        .page { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #FFDEE9 0%, #B5FFFC 100%); display: none; flex-direction: column; }
        .page.active { display: flex; pointer-events: auto; }
        .page .header { background: rgba(255,255,255,0.98); }
        .back-btn { background: none; border: none; font-size: 24px; color: #FF6B8A; cursor: pointer; padding: 4px; }
        .page-content { flex: 1; padding: 16px; overflow-y: auto; }
        
        /* ç­›é€‰æ ‡ç­¾ */
        .filter-tabs { display: flex; gap: 8px; margin-bottom: 16px; overflow-x: auto; padding-bottom: 8px; }
        .filter-tab { padding: 8px 14px; border-radius: 20px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.9); font-size: 13px; white-space: nowrap; cursor: pointer; }
        .filter-tab.active { background: #FF6B8A; color: white; border-color: #FF6B8A; }
        
        /* æ—¥è®°å¡ç‰‡ */
        .diary-list { display: flex; flex-direction: column; gap: 12px; }
        .diary-card { background: rgba(255,255,255,0.95); border-radius: 14px; padding: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .diary-card-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .diary-card-date { font-size: 12px; color: #888; }
        .diary-card-mood { font-size: 22px; }
        .diary-card-content { font-size: 14px; line-height: 1.6; color: #444; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .diary-card-actions { display: flex; justify-content: flex-end; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; }
        .delete-btn { padding: 6px 12px; border-radius: 6px; border: none; background: #FF3B30; color: white; font-size: 12px; cursor: pointer; }
        
        /* çºªå¿µæ—¥å¡ç‰‡ */
        .anniversary-full-list { display: flex; flex-direction: column; gap: 12px; }
        .anniversary-card { background: rgba(255,255,255,0.95); border-radius: 14px; padding: 14px; display: flex; align-items: center; gap: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .anniversary-card-icon { width: 44px; height: 44px; border-radius: 12px; background: linear-gradient(135deg, #FFB6C1, #FF6B8A); display: flex; align-items: center; justify-content: center; font-size: 22px; }
        .anniversary-card-info { flex: 1; }
        .anniversary-card-name { font-size: 15px; font-weight: 600; }
        .anniversary-card-date { font-size: 13px; color: #888; }
        .anniversary-card-countdown { text-align: center; }
        .anniversary-card-days { font-size: 22px; font-weight: 600; color: #FF6B8A; }
        .anniversary-card-label { font-size: 11px; color: #888; }
        .anniversary-card-delete { padding: 8px; background: none; border: none; font-size: 18px; cursor: pointer; }
        
        /* èƒ¶å›Š */
        .capsule-tabs { display: flex; gap: 8px; margin-bottom: 16px; }
        .capsule-tab { flex: 1; padding: 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.9); cursor: pointer; font-size: 14px; }
        .capsule-tab.active { background: #FF6B8A; color: white; border-color: #FF6B8A; }
        .capsule-list { display: flex; flex-direction: column; gap: 12px; }
        .capsule-card { background: rgba(255,255,255,0.95); border-radius: 14px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .capsule-card.opened { border: 2px solid #FF6B8A; }
        .capsule-card-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .capsule-card-date { font-size: 13px; color: #888; }
        .capsule-card-status { padding: 4px 10px; border-radius: 12px; font-size: 12px; }
        .capsule-card-status.waiting { background: rgba(255,149,0,0.1); color: #ff9500; }
        .capsule-card-status.ready { background: rgba(52,199,89,0.1); color: #34c759; }
        .capsule-card-status.opened { background: rgba(0,122,255,0.1); color: #007aff; }
        .capsule-card-content { font-size: 14px; line-height: 1.6; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px; margin-bottom: 12px; }
        .capsule-card-btn { width: 100%; padding: 12px; border-radius: 10px; border: none; background: #FF6B8A; color: white; font-size: 14px; cursor: pointer; }
        .capsule-card-btn:disabled { background: #ccc; cursor: not-allowed; }
        
        /* ç›¸å†Œ */
        .photo-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; }
        .photo-grid img { width: 100%; aspect-ratio: 1; object-fit: cover; cursor: pointer; }
        
        /* å¤‡ä»½é¡µé¢ */
        .backup-card { background: rgba(255,255,255,0.95); border-radius: 14px; padding: 20px; text-align: center; margin-bottom: 14px; }
        .backup-icon { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #FFB6C1, #FF6B8A); display: flex; align-items: center; justify-content: center; font-size: 24px; margin: 0 auto 12px; }
        .backup-card h3 { font-size: 16px; margin-bottom: 6px; }
        .backup-card p { font-size: 13px; color: #888; margin-bottom: 12px; }
        .backup-card .btn-primary { padding: 12px; border-radius: 10px; border: none; background: #FF6B8A; color: white; font-size: 14px; cursor: pointer; width: 100%; }
        .backup-card.danger { border: 1px solid rgba(255,59,48,0.3); }
        .backup-card.danger .backup-icon { background: linear-gradient(135deg, rgba(255,59,48,0.2), #ff3b30); }
        .backup-card .btn-danger { padding: 12px; border-radius: 10px; border: none; background: #FF3B30; color: white; font-size: 14px; cursor: pointer; width: 100%; }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 200px; color: #888; }
        .empty-state .empty-icon { font-size: 50px; margin-bottom: 12px; opacity: 0.5; }
        
        /* æ¨¡æ€æ¡† */
        .modal-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 500; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-container.active { display: flex; }
        .modal { background: white; border-radius: 20px; width: 100%; max-width: 400px; max-height: 90vh; overflow: hidden; display: none; flex-direction: column; }
        .modal.active { display: flex; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 1px solid #eee; }
        .modal-header h3 { font-size: 17px; }
        .close-btn { width: 30px; height: 30px; border-radius: 50%; border: none; background: rgba(0,0,0,0.05); font-size: 20px; cursor: pointer; }
        .modal-body { padding: 20px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 12px 20px; border-top: 1px solid #eee; display: flex; gap: 10px; justify-content: flex-end; }
        .modal-footer .btn-primary { padding: 10px 20px; border-radius: 10px; border: none; background: #FF6B8A; color: white; font-size: 14px; cursor: pointer; }
        
        /* å¿ƒæƒ…é€‰æ‹© */
        .mood-selector { margin-bottom: 16px; }
        .mood-label { display: block; font-size: 13px; color: #666; margin-bottom: 8px; }
        .mood-options { display: flex; gap: 8px; }
        .mood-btn { width: 40px; height: 40px; border-radius: 50%; border: 2px solid transparent; background: rgba(0,0,0,0.03); font-size: 18px; cursor: pointer; }
        .mood-btn.active { border-color: #FF6B8A; background: rgba(255,107,138,0.1); }
        
        /* è¾“å…¥æ¡† */
        textarea { width: 100%; padding: 12px; border: 1px solid #eee; border-radius: 10px; font-size: 14px; font-family: inherit; resize: none; min-height: 100px; }
        textarea:focus { outline: none; border-color: #FF6B8A; }
        .word-count { text-align: right; font-size: 12px; color: #888; margin-top: 6px; }
        
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; font-size: 13px; color: #666; margin-bottom: 6px; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #eee; border-radius: 10px; font-size: 14px; }
        .form-group input:focus { outline: none; border-color: #FF6B8A; }
        
        /* Tabs */
        .tabs { display: flex; gap: 8px; margin-bottom: 16px; }
        .tab { flex: 1; padding: 10px; border-radius: 10px; border: 1px solid #eee; background: white; cursor: pointer; }
        .tab.active { background: #FF6B8A; color: white; border-color: #FF6B8A; }
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }
        
        /* Toast */
        .toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; font-size: 14px; z-index: 1000; opacity: 0; transition: all 0.3s; }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        
        /* ç…§ç‰‡æŸ¥çœ‹å™¨ */
        .photo-viewer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .photo-viewer.active { display: flex; }
        .photo-viewer img { max-width: 90%; max-height: 90%; object-fit: contain; }
        .photo-viewer-close { position: absolute; top: 20px; right: 20px; background: none; border: none; color: white; font-size: 36px; cursor: pointer; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- æ¬¢è¿é¡µ -->
    <section id="welcome-screen" class="screen active">
        <div class="welcome-content">
            <div class="heart"></div>
            <h1 class="app-title">å¤§å¤§ç‹ & çš®çš®è™¾</h1>
            <p class="app-slogan">è®°å½•æˆ‘ä»¬çš„æ¯ä¸€åˆ»ç¾å¥½</p>
            <div class="welcome-form">
                <div class="input-group">
                    <label>ä½ çš„åå­—</label>
                    <input type="text" id="your-name" placeholder="å¤§å¤§ç‹">
                </div>
                <div class="input-group">
                    <label>TAçš„åå­—</label>
                    <input type="text" id="partner-name" placeholder="çš®çš®è™¾">
                </div>
                <div class="input-group">
                    <label>åœ¨ä¸€èµ·çš„æ—¥æœŸ</label>
                    <input type="date" id="love-date">
                </div>
                <button class="btn-primary" id="start-btn">å¼€å§‹æˆ‘ä»¬çš„æ•…äº‹</button>
            </div>
        </div>
    </section>

    <!-- é”å±é¡µ -->
    <section id="lock-screen" class="screen">
        <div class="lock-content">
            <div class="lock-icon">ğŸ”’</div>
            <h2>å·²é”å®š</h2>
            <p>ç‚¹å‡»ä»»æ„ä½ç½®è§£é”</p>
        </div>
    </section>

    <!-- ä¸»ç•Œé¢ -->
    <section id="main-screen" class="screen">
        <header class="header">
            <button class="icon-btn" id="menu-btn"><i class="ri-menu-line"></i></button>
            <h1 id="header-title">å¤§å¤§ç‹ & çš®çš®è™¾</h1>
            <button class="icon-btn" id="settings-btn"><i class="ri-settings-3-line"></i></button>
        </header>
        <div class="main-content">
            <div class="timer-card">
                <div class="timer-label">æˆ‘ä»¬åœ¨ä¸€èµ·</div>
                <div class="timer-display">
                    <div class="timer-unit"><span class="timer-value" id="years">0</span><span class="timer-text">å¹´</span></div>
                    <div class="timer-separator">:</div>
                    <div class="timer-unit"><span class="timer-value" id="months">0</span><span class="timer-text">æœˆ</span></div>
                    <div class="timer-separator">:</div>
                    <div class="timer-unit"><span class="timer-value" id="days">0</span><span class="timer-text">å¤©</span></div>
                    <div class="timer-separator">/</div>
                    <div class="timer-unit-small"><span class="timer-value" id="hours">00</span><span class="timer-text">æ—¶</span></div>
                    <div class="timer-separator">:</div>
                    <div class="timer-unit-small"><span class="timer-value" id="minutes">00</span><span class="timer-text">åˆ†</span></div>
                    <div class="timer-separator">:</div>
                    <div class="timer-unit-small"><span class="timer-value" id="seconds">00</span><span class="timer-text">ç§’</span></div>
                </div>
                <div class="timer-subtitle">æˆ‘ä»¬å·²ç»ä¸€èµ·èµ°è¿‡äº† <span class="highlight" id="total-days">0</span> å¤©</div>
            </div>

            <div class="quick-actions">
                <button class="action-btn" onclick="openDiaryModal()"><i class="ri-edit-line"></i><span>æ—¥è®°</span></button>
                <button class="action-btn" onclick="openMomentModal()"><i class="ri-heart-line"></i><span>åŠ¨æ€</span></button>
                <button class="action-btn" onclick="openCapsuleModal()"><i class="ri-time-line"></i><span>èƒ¶å›Š</span></button>
                <button class="action-btn" onclick="lockScreen()"><i class="ri-lock-line"></i><span>é”å±</span></button>
            </div>

            <div class="section-card">
                <div class="card-header">
                    <h2><i class="ri-calendar-event-line"></i> çºªå¿µæ—¥</h2>
                    <button class="view-all-btn" onclick="openAnniversaryModal()">+æ·»åŠ </button>
                </div>
                <div id="anniversary-list"></div>
            </div>

            <div class="section-card">
                <div class="card-header">
                    <h2><i class="ri-heart-pulse-line"></i> æœ€æ–°åŠ¨æ€</h2>
                    <button class="view-all-btn" onclick="showAllMoments()">å…¨éƒ¨</button>
                </div>
                <div id="moments-list"></div>
            </div>
        </div>
    </section>

    <!-- ä¾§è¾¹æ  -->
    <aside id="drawer" class="drawer">
        <div class="drawer-overlay" id="drawer-overlay"></div>
        <div class="drawer-content">
            <div class="drawer-header">
                <div class="user-avatar"><i class="ri-user-heart-line"></i></div>
                <div class="user-info">
                    <h3 id="user-name">å¤§å¤§ç‹</h3>
                    <p id="partner-name-display">çš®çš®è™¾ â¤ï¸</p>
                </div>
            </div>
            <nav class="drawer-nav">
                <a href="#" class="nav-item active" onclick="navigateTo('home', this)"><i class="ri-home-4-line"></i><span>é¦–é¡µ</span></a>
                <a href="#" class="nav-item" onclick="navigateTo('diary', this)"><i class="ri-book-open-line"></i><span>æ—¥è®°æœ¬</span></a>
                <a href="#" class="nav-item" onclick="navigateTo('anniversaries', this)"><i class="ri-calendar-check-line"></i><span>çºªå¿µæ—¥</span></a>
                <a href="#" class="nav-item" onclick="navigateTo('capsule', this)"><i class="ri-time-line"></i><span>æ—¶å…‰èƒ¶å›Š</span></a>
                <a href="#" class="nav-item" onclick="navigateTo('photos', this)"><i class="ri-gallery-line"></i><span>ç›¸å†Œ</span></a>
                <a href="#" class="nav-item" onclick="navigateTo('backup', this)"><i class="ri-download-2-line"></i><span>å¯¼å‡ºå¤‡ä»½</span></a>
            </nav>
        </div>
    </aside>

    <!-- é¡µé¢å®¹å™¨ -->
    <div id="pages-container">
        <!-- æ—¥è®°æœ¬é¡µé¢ -->
        <div id="page-diary" class="page">
            <header class="header">
                <button class="back-btn" onclick="navigateTo('home')"><i class="ri-arrow-left-line"></i></button>
                <h1>ğŸ“– æ—¥è®°æœ¬</h1>
                <button class="icon-btn" onclick="openDiaryModal()"><i class="ri-add-line"></i></button>
            </header>
            <div class="page-content">
                <div class="filter-tabs">
                    <button class="filter-tab active" onclick="filterDiary('all', this)">å…¨éƒ¨</button>
                    <button class="filter-tab" onclick="filterDiary('today', this)">ä»Šå¤©</button>
                    <button class="filter-tab" onclick="filterDiary('week', this)">æœ¬å‘¨</button>
                    <button class="filter-tab" onclick="filterDiary('month', this)">æœ¬æœˆ</button>
                </div>
                <div class="diary-list" id="diary-list-page"></div>
            </div>
        </div>

        <!-- çºªå¿µæ—¥é¡µé¢ -->
        <div id="page-anniversaries" class="page">
            <header class="header">
                <button class="back-btn" onclick="navigateTo('home')"><i class="ri-arrow-left-line"></i></button>
                <h1>ğŸ“… çºªå¿µæ—¥</h1>
                <button class="icon-btn" onclick="openAnniversaryModal()"><i class="ri-add-line"></i></button>
            </header>
            <div class="page-content">
                <div class="anniversary-full-list" id="anniversary-full-list"></div>
            </div>
        </div>

        <!-- æ—¶å…‰èƒ¶å›Šé¡µé¢ -->
        <div id="page-capsule" class="page">
            <header class="header">
                <button class="back-btn" onclick="navigateTo('home')"><i class="ri-arrow-left-line"></i></button>
                <h1>â³ æ—¶å…‰èƒ¶å›Š</h1>
                <button class="icon-btn" onclick="openCapsuleModal()"><i class="ri-add-line"></i></button>
            </header>
            <div class="page-content">
                <div class="capsule-tabs">
                    <button class="capsule-tab active" onclick="filterCapsule('unopened', this)">æœªå¼€å¯</button>
                    <button class="capsule-tab" onclick="filterCapsule('opened', this)">å·²å¼€å¯</button>
                </div>
                <div class="capsule-list" id="capsule-full-list"></div>
            </div>
        </div>

        <!-- ç›¸å†Œé¡µé¢ -->
        <div id="page-photos" class="page">
            <header class="header">
                <button class="back-btn" onclick="navigateTo('home')"><i class="ri-arrow-left-line"></i></button>
                <h1>ğŸ–¼ï¸ æˆ‘ä»¬çš„ç›¸å†Œ</h1>
                <button class="icon-btn" onclick="document.getElementById('photo-upload').click()"><i class="ri-upload-2-line"></i></button>
            </header>
            <div class="page-content">
                <div class="photo-grid" id="photo-grid-page"></div>
            </div>
        </div>

        <!-- å¤‡ä»½é¡µé¢ -->
        <div id="page-backup" class="page">
            <header class="header">
                <button class="back-btn" onclick="navigateTo('home')"><i class="ri-arrow-left-line"></i></button>
                <h1>ğŸ’¾ å¯¼å‡ºå¤‡ä»½</h1>
            </header>
            <div class="page-content">
                <div class="backup-card">
                    <div class="backup-icon"><i class="ri-download-2-line"></i></div>
                    <h3>å¯¼å‡ºæ•°æ®</h3>
                    <p>å°†æ‰€æœ‰æ•°æ®å¯¼å‡ºä¸ºJSONæ–‡ä»¶</p>
                    <button class="btn-primary" onclick="exportData()">å¯¼å‡ºå¤‡ä»½</button>
                </div>
                <div class="backup-card">
                    <div class="backup-icon"><i class="ri-upload-2-line"></i></div>
                    <h3>å¯¼å…¥æ•°æ®</h3>
                    <p>ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æ•°æ®</p>
                    <button class="btn-primary" onclick="document.getElementById('import-input').click()">å¯¼å…¥æ•°æ®</button>
                    <input type="file" id="import-input" accept=".json" hidden onchange="importData(this)">
                </div>
                <div class="backup-card danger">
                    <div class="backup-icon"><i class="ri-delete-bin-line"></i></div>
                    <h3>é‡ç½®æ•°æ®</h3>
                    <p>æ¸…é™¤æ‰€æœ‰æ•°æ®ï¼Œä¸å¯æ¢å¤</p>
                    <button class="btn-danger" onclick="resetAllData()">é‡ç½®æ•°æ®</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç…§ç‰‡ä¸Šä¼  -->
    <input type="file" id="photo-upload" accept="image/*" multiple hidden onchange="uploadPhotos(this)">

    <!-- æ¨¡æ€æ¡†å®¹å™¨ -->
    <div id="modal-container" class="modal-container">
        <!-- æ—¥è®°æ¨¡æ€æ¡† -->
        <div id="diary-modal" class="modal">
            <div class="modal-header">
                <h3>è®°å½•ä»Šæ—¥ç¾å¥½</h3>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="mood-selector">
                    <span class="mood-label">ä»Šå¤©çš„å¿ƒæƒ…</span>
                    <div class="mood-options">
                        <button class="mood-btn active" data-mood="happy" onclick="selectMood(this)">ğŸ˜Š</button>
                        <button class="mood-btn" data-mood="loved" onclick="selectMood(this)">ğŸ˜</button>
                        <button class="mood-btn" data-mood="grateful" onclick="selectMood(this)">ğŸ™</button>
                        <button class="mood-btn" data-mood="peaceful" onclick="selectMood(this)">ğŸ˜Œ</button>
                        <button class="mood-btn" data-mood="excited" onclick="selectMood(this)">ğŸ¤©</button>
                    </div>
                </div>
                <textarea id="diary-content" placeholder="ä»Šå¤©å‘ç”Ÿäº†ä»€ä¹ˆå¼€å¿ƒçš„äº‹å‘¢..."></textarea>
                <div class="word-count"><span id="word-count">0</span>/2000</div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="saveDiary()">ä¿å­˜</button>
            </div>
        </div>

        <!-- åŠ¨æ€æ¨¡æ€æ¡† -->
        <div id="moment-modal" class="modal">
            <div class="modal-header">
                <h3>å‘å¸ƒåŠ¨æ€</h3>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <textarea id="moment-content" placeholder="æƒ³å¯¹TAè¯´..."></textarea>
                <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:12px;">
                    <button class="tab" onclick="quickMsg('æƒ³ä½ å•¦ â¤ï¸')">æƒ³ä½ å•¦</button>
                    <button class="tab" onclick="quickMsg('ä»Šå¤©è¶…å¼€å¿ƒ ğŸŒŸ')">ä»Šå¤©è¶…å¼€å¿ƒ</button>
                    <button class="tab" onclick="quickMsg('çˆ±ä½ å“Ÿ ğŸ’•')">çˆ±ä½ å“Ÿ</button>
                    <button class="tab" onclick="quickMsg('æ™šå®‰ ğŸŒ™')">æ™šå®‰</button>
                    <button class="tab" onclick="quickMsg('ä¹ˆä¹ˆå“’ ğŸ’‹')">ä¹ˆä¹ˆå“’</button>
                    <button class="tab" onclick="quickMsg('æœ‰ä½ çœŸå¥½ ğŸŒ¸')">æœ‰ä½ çœŸå¥½</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="saveMoment()">å‘é€</button>
            </div>
        </div>

        <!-- çºªå¿µæ—¥æ¨¡æ€æ¡† -->
        <div id="anniversary-modal" class="modal">
            <div class="modal-header">
                <h3>æ·»åŠ çºªå¿µæ—¥</h3>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>åç§°</label>
                    <input type="text" id="anniversary-name" placeholder="å¦‚ï¼šåœ¨ä¸€èµ·çºªå¿µæ—¥">
                </div>
                <div class="form-group">
                    <label>æ—¥æœŸ</label>
                    <input type="date" id="anniversary-date">
                </div>
                <div class="form-group">
                    <label>ç±»å‹</label>
                    <select id="anniversary-type">
                        <option value="custom">è‡ªå®šä¹‰</option>
                        <option value="anniversary">å‘¨å¹´çºªå¿µ</option>
                        <option value="birthday">ç”Ÿæ—¥</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="saveAnniversary()">ä¿å­˜</button>
            </div>
        </div>

        <!-- æ—¶å…‰èƒ¶å›Šæ¨¡æ€æ¡† -->
        <div id="capsule-modal" class="modal">
            <div class="modal-header">
                <h3>æ—¶å…‰èƒ¶å›Š</h3>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab active" onclick="switchCapsuleTab('create', this)">åˆ›å»º</button>
                    <button class="tab" onclick="switchCapsuleTab('list', this)">æˆ‘çš„èƒ¶å›Š</button>
                </div>
                <div id="capsule-create-panel" class="tab-panel active">
                    <textarea id="capsule-content" placeholder="ç»™æœªæ¥çš„æˆ‘ä»¬å†™å‡ å¥è¯..."></textarea>
                    <div class="form-group" style="margin-top:16px;">
                        <label>å¼€å¯æ—¥æœŸ</label>
                        <input type="date" id="capsule-open-date">
                    </div>
                    <button class="btn-primary" onclick="createCapsule()">å°å­˜èƒ¶å›Š</button>
                </div>
                <div id="capsule-list-panel" class="tab-panel"></div>
            </div>
        </div>

        <!-- è®¾ç½®æ¨¡æ€æ¡† -->
        <div id="settings-modal" class="modal">
            <div class="modal-header">
                <h3>è®¾ç½®</h3>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>æˆ‘çš„åå­—</label>
                    <input type="text" id="setting-my-name">
                </div>
                <div class="form-group">
                    <label>TAçš„åå­—</label>
                    <input type="text" id="setting-partner-name">
                </div>
                <div class="form-group">
                    <label>åœ¨ä¸€èµ·çš„æ—¥å­</label>
                    <input type="date" id="setting-love-date">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="saveSettings()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- ç…§ç‰‡æŸ¥çœ‹å™¨ -->
    <div id="photo-viewer" class="photo-viewer">
        <button class="photo-viewer-close" onclick="closePhotoViewer()">Ã—</button>
        <img id="photo-viewer-img" src="" alt="">
    </div>

    <script src="js/main.js"></script>
</body>
</html>
